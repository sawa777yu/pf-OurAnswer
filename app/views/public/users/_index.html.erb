<table class='table'>
  <thead>
    <tr>
      <th>プロフィール画像</th>
      <th>ニックネーム@ユーザーID</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% users.each do |user| %>
      <tr>
        <td><%= attachment_image_tag(user, :profile_image, fallback: "no_image.jpg", size: "50x50", class: 'rounded-circle') %></td>
        <td><%= user.name %>@<%= user.our_answers_id %></td>
        <td>フォロー数:<%= user.follower_of_relationships.count %></td>
        <td>フォロワー数:<%= user.followed_of_relationships.count %></td>
        <% if user_signed_in? %>
        <!--未ログイン状態でも検索を行えるようにするために記述。上記が無いとcurrent_userの部分でエラーになる-->
        <td>
          <% if current_user != user %>
            <% if current_user.following?(user) %>
             <%= link_to "フォローを外す", user_relationships_path(user.id), method: :delete %>
            <% else %>
             <%= link_to "フォローする", user_relationships_path(user.id), method: :post %>
            <% end %>
          <% end %>
        </td>
        <% end %>
        <td><%= link_to 'Show', user_path(user), class: "user_#{user.id}" %></td>
      </tr>
    <% end %>
  </tbody>
</table>